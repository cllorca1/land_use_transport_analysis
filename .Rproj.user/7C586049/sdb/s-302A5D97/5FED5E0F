{
    "collab_server" : "",
    "contents" : "pacman::p_load(ggplot2, dplyr)\n\nread_results = function(output_path, subpath, scenario_name){\n\npath = \"c:/models/silo/muc/scenOutput\"\n\nfile_name = \"resultFile1.csv\"\n\nmin_y = 0\nmax_y = 50\n\nraw = readLines(paste(path,subpath,file_name,sep = \"/\"))\nthis_variable = \"aveCommuteDistByRegion\"\nthis_variable_stops = \"carOwnershipLevel\"\n\ndata = data.frame()\ni = 1\nwhile (i <= length(raw)){\n  if (length(grep(pattern = \"Year\", x = raw[i]))==1){\n    #found a new year\n    year = as.numeric(sub(pattern = \"Year \",replace = \"\",x = raw[i]))\n    print(year)\n    i = i+1\n  } else {\n    line_elements =strsplit(x = raw[i], split = \",\")[[1]]\n    if(line_elements[1] == this_variable){\n      i = i+1\n      line_elements =strsplit(x = raw[i], split = \",\")[[1]]\n      while (line_elements[1] != this_variable_stops){\n        row = list(year = year, region = as.numeric(line_elements[1]), time =as.numeric(line_elements[2]))\n        data = rbind(data, row)\n        i = i+1\n        line_elements =strsplit(x = raw[i], split = \",\")[[1]]\n      }\n    }\n    i = i+1\n  }\n}\n\n\n\nggplot(data, aes(x=year, y =time, color = as.factor(region))) +\n  geom_line() + geom_point() + theme_light() + \n  xlab(\"Year\") + ylab(\"Average comuting time by region (minutes)\") + \n  ylim(min_y, max_y)\n \ndata_mean = data %>% group_by(year) %>% summarize(time = mean(time, na.rm = T))\n\nplot3 = ggplot(data_mean, aes(x=year, y =time)) +\n  geom_line() + geom_point() + theme_light() + \n  xlab(\"Year\") + ylab(\"Average comuting time by region (minutes)\") + \n  ylim(min_y, max_y)\nprint(plot3)\n\nggsave(file = paste(output_path,\"time_all_\",scenario_name,\".png\", sep = \"\"),\n       plot =  plot3, height = 15, width = 10, units = \"cm\" )\n\n\n# Age\n# ppByRace\n# hhByType\n# hhByRace\n# hhBySize\n# AveHHSize\n# AveHHInc\n# laborParticipationRateByAge\n# carOwnershipLevel\n# QualityLevel\n# CountOfDD\n# AveMonthlyPrice\n# AveVacancy\n# Available land for construction by region\n# Housing costs by income group\n# jobByRegion\n# InmigrantsPP\n# OutmigrantsPP\n# Count of simulated events\n# DivorceEvent\n# LicenseEvent\n# MigrationEvent\n# ConstructionEvent\n# MoveEvent\n# LeaveParentsEvent\n# BirthEvent\n# BirthDayEvent\n# RenovationEvent\n# EducationEvent\n# DemolitionEvent\n# EmploymentEvent\n# MarriageEvent\n# DeathEvent\n# AddedCar\n# RelinquishedCar\n\n\n}\n\n\n\n\n\n\n",
    "created" : 1532509887167.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2287327871",
    "id" : "5FED5E0F",
    "lastKnownWriteTime" : 1532933621,
    "last_content_update" : 1532933621014,
    "path" : "C:/code/silo_output_analyzer/results_reader.R",
    "project_path" : "results_reader.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}