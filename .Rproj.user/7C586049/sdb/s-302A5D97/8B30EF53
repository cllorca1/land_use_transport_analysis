{
    "collab_server" : "",
    "contents" : "pacman::p_load(ggplot2, dplyr)\n\nread_spatial = function(output_path, subpath, scenario_name, regions){\n\npath = \"c:/models/silo/muc/scenOutput\"\n\nfile_name = \"resultFileSpatial1.csv\"\n\nraw = read.csv(paste(path,subpath,file_name,sep = \"/\"),\n               fill = T,\n               skip = 1,as.is = 1:21)\n\nraw = raw %>% filter(autoAccessibility != \"\", autoAccessibility != \"autoAccessibility\")\nzones  = unique(as.numeric(raw$Year2011))\nyears = 2011:2050\n\nfirstColumns = data.frame()\nfor(year in years){\n  thisYear = data.frame(zone = zones, year = year)\n  firstColumns = rbind(firstColumns, thisYear)\n}\n\nraw = cbind(firstColumns, raw)\n\nraw = raw %>% mutate (validation = if_else(zone == as.numeric(Year2011), T, F))\nsummary(raw$validation)\n\ndata = raw %>% select(year, zone, autoAccessibility,\n                      transitAccessibility , \n                      population, \n                      households, \n                      jobs) %>% \n  mutate(autoAccessibility = as.numeric(autoAccessibility)) %>%\n  mutate(transitAccessibility = as.numeric(transitAccessibility)) %>%\n  mutate(population = as.numeric(population)) %>%\n  mutate(households = as.numeric(households)) %>%\n  mutate(jobs = as.numeric(jobs))\n\ndata = merge(x= data, y = zonesWithRegionName, by = \"zone\")\n\ndata_region = data %>% group_by(year, region_name = work_region_name) %>% summarize(autoAccessibility = mean(autoAccessibility),\n                                                                         transitAccessibility = mean(transitAccessibility),\n                                                                         population = sum(population),\n                                                                         households = sum(households), \n                                                                         jobs = sum(jobs))\n\n\ndata_region = data_region %>%\n  filter(as.character(region_name) %in% regions)\n\nplot5 = ggplot(data_region, aes(x=as.integer(year),\n                        y = population, \n                        color = region_name,\n                        group = region_name)) + \n  ylab(\"Population\") + \n  geom_line(size = 1) + \n  theme_light() + \n  theme(legend.position = \"bottom\") + \n  labs(color = \"Region\") + \n  xlab(\"Year\")\n\nprint(plot5)\n\nggsave(file = paste(output_path,\"pp_regional_\",scenario_name,\".png\", sep = \"\"),\n       plot =  plot5, height = 15, width = 10, units = \"cm\" )\n\nplot6 = ggplot(data_region, aes(x=as.integer(year),\n                        y = autoAccessibility, \n                        color = region_name,\n                        group = region_name)) + \n  ylab(\"Auto accessibility\") + \n  geom_line(size = 1) + \n  theme_light() + \n  theme(legend.position = \"bottom\") + \n  labs(color = \"Region\") + \n  xlab(\"Year\")\n\n#print(plot6)\n\nggsave(file = paste(output_path,\"auto_access_regional_\",scenario_name,\".png\", sep = \"\"),\n       plot =  plot6, height = 15, width = 10, units = \"cm\" )\n\nplot7= ggplot(data_region, aes(x=as.integer(year),\n                                y = jobs, \n                                color = region_name,\n                                group = region_name)) + \n  ylab(\"Jobs\") + \n  geom_line(size = 1) + \n  theme_light() + \n  theme(legend.position = \"bottom\") + \n  labs(color = \"Region\") + \n  xlab(\"Year\")\n\n#print(plot7)\n\nggsave(file = paste(output_path,\"jj_regional_\",scenario_name,\".png\", sep = \"\"),\n       plot =  plot7, height = 15, width = 10, units = \"cm\" )\n}\n",
    "created" : 1532696808222.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1866405642",
    "id" : "8B30EF53",
    "lastKnownWriteTime" : 1532932132,
    "last_content_update" : 1532932132241,
    "path" : "C:/code/silo_output_analyzer/spatial_reader.R",
    "project_path" : "spatial_reader.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}